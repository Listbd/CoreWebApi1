<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>PowerBI Embeded</title>
</head>
<body>
    <h1>PowerBI Embeded with Angular 2 and .Net Core-ish</h1>

    <iframe id="iFrameEmbedReport" height="768" width="1024" seamless></iframe>


    <!--<input type="hidden" id="MainContent_accessTokenText" value="eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ2ZXIiOiIwLjIuMCIsIndjbiI6InBiaWJ1ZzEiLCJ3aWQiOiI2ZTQ3MDA0Yy0xN2U4LTRiNjMtOWM4MS01YjZmZWVkOTJlMTciLCJyaWQiOiJmZTM0NjFkZi0wOWI4LTRhNmUtOWVkZC0xNTczY2UzZWQ4OTciLCJ1c2VybmFtZSI6ImplbkBjdXN0b21lci5jb20iLCJyb2xlcyI6WyJDdXN0b21lciIsIkRldmVsb3BlciJdLCJpc3MiOiJQb3dlckJJU0RLIiwiYXVkIjoiaHR0cHM6Ly9hbmFseXNpcy53aW5kb3dzLm5ldC9wb3dlcmJpL2FwaSIsImV4cCI6MTQ3MTM4NDExMSwibmJmIjoxNDcxMzgwNTExfQ.4E0Xhnd-gPMmRe7w-8SVzha4Z4K4Wh73gx0uL1pLrVQ" />
    <input type="hidden" id="MainContent_embedUrlText" value="https://embedded.powerbi.com/appTokenReportEmbed?reportId=fe3461df-09b8-4a6e-9edd-1573ce3ed897" />-->

    <input type="hidden" id="MainContent_accessTokenText" value="eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ2ZXIiOiIwLjIuMCIsIndjbiI6InBiaWJ1ZzEiLCJ3aWQiOiI2ZTQ3MDA0Yy0xN2U4LTRiNjMtOWM4MS01YjZmZWVkOTJlMTciLCJyaWQiOiJmZTM0NjFkZi0wOWI4LTRhNmUtOWVkZC0xNTczY2UzZWQ4OTciLCJ1c2VybmFtZSI6ImplbkBjdXN0b21lci5jb20iLCJyb2xlcyI6WyJDdXN0b21lciIsIkRldmVsb3BlciJdLCJpc3MiOiJQb3dlckJJU0RLIiwiYXVkIjoiaHR0cHM6Ly9hbmFseXNpcy53aW5kb3dzLm5ldC9wb3dlcmJpL2FwaSIsImV4cCI6MTQ3MTM4NDExMSwibmJmIjoxNDcxMzgwNTExfQ.4E0Xhnd-gPMmRe7w-8SVzha4Z4K4Wh73gx0uL1pLrVQ" />
    <input type="hidden" id="MainContent_embedUrlText" value="https://embedded.powerbi.com/appTokenReportEmbed?reportId=fe3461df-09b8-4a6e-9edd-1573ce3ed897" />



<!-- Js function to assign iframe embedUrl and access token -->

    <script src="js/jquery-1.10.2.js"></script>
    <script type="text/javascript">
        
        window.onload = function () {
            $.get("http://localhost:4449/api/report/b550bbb6-5434-4e11-9614-c8ef9a8cd942", function(data) {
                alert("called api");
            });

            // find the iFrame on the page and handle the loaded event.
            var iframe = document.getElementById('iFrameEmbedReport');
            iframe.src = document.getElementById('MainContent_embedUrlText').value;
            iframe.onload = postActionLoadReport;
            // post the access token to the iFrame to load the tile
            function postActionLoadReport() {
                // get the app token.
                accessToken = document.getElementById('MainContent_accessTokenText').value;
                // construct the push message structure
                var m = { action: "loadReport", accessToken: accessToken };
                message = JSON.stringify(m);
                // push the message.
                iframe = document.getElementById('iFrameEmbedReport');
                iframe.contentWindow.postMessage(message, "*");
            }
        };
    </script>

</body>
</html>
